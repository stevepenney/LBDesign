{% extends "base.html" %}

{% block title %}Edit {{ beam.name }}{% endblock %}

{% block content %}
<h1>Edit Beam</h1>

<div class="card" style="max-width: 800px;">
    <form method="POST" action="{{ url_for('beams.edit', beam_id=beam.id) }}">
        <h2>Basic Information</h2>
        
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="name">Beam Name *</label>
                <input type="text" id="name" name="name" value="{{ beam.name }}" required autofocus>
            </div>
            
            <div class="form-group">
                <label for="reference">Reference Code</label>
                <input type="text" id="reference" name="reference" value="{{ beam.reference or '' }}">
            </div>
        </div>
        
        <div class="form-group">
            <label for="member_type">Member Type *</label>
            <select id="member_type" name="member_type" required>
                <option value="floor_joist" {% if beam.member_type == 'floor_joist' %}selected{% endif %}>Floor Joist</option>
                <option value="rafter" {% if beam.member_type == 'rafter' %}selected{% endif %}>Rafter</option>
                <option value="beam" {% if beam.member_type == 'beam' %}selected{% endif %}>Beam</option>
                <option value="header" {% if beam.member_type == 'header' %}selected{% endif %}>Header</option>
                <option value="lintel" {% if beam.member_type == 'lintel' %}selected{% endif %}>Lintel</option>
            </select>
        </div>
        
        <h2 class="mt-3">Dimensions</h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="span">Span (meters) *</label>
                <input type="number" id="span" name="span" step="0.01" min="0" 
                       value="{{ beam.span }}" required>
            </div>
            
            <div class="form-group">
                <label for="spacing">Spacing (meters)</label>
                <input type="number" id="spacing" name="spacing" step="0.01" min="0"
                       value="{{ beam.spacing or '' }}">
                <small style="color: #666;">For joists/rafters only</small>
            </div>
        </div>
        
        <h2 class="mt-3">Loading</h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="dead_load">Dead Load (kPa or kN/m)</label>
                <input type="number" id="dead_load" name="dead_load" step="0.01" min="0"
                       value="{{ beam.dead_load or '' }}">
            </div>
            
            <div class="form-group">
                <label for="live_load">Live Load (kPa or kN/m)</label>
                <input type="number" id="live_load" name="live_load" step="0.01" min="0"
                       value="{{ beam.live_load or '' }}">
            </div>
        </div>
        
        <h3 class="mt-2">Point Loads (Optional)</h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="point_load_1">Point Load 1 (kN)</label>
                <input type="number" id="point_load_1" name="point_load_1" step="0.01" min="0"
                       value="{{ beam.point_load_1 or '' }}">
            </div>
            
            <div class="form-group">
                <label for="point_load_1_position">Position from Left (m)</label>
                <input type="number" id="point_load_1_position" name="point_load_1_position" 
                       step="0.01" min="0"
                       value="{{ beam.point_load_1_position or '' }}">
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="point_load_2">Point Load 2 (kN)</label>
                <input type="number" id="point_load_2" name="point_load_2" step="0.01" min="0"
                       value="{{ beam.point_load_2 or '' }}">
            </div>
            
            <div class="form-group">
                <label for="point_load_2_position">Position from Left (m)</label>
                <input type="number" id="point_load_2_position" name="point_load_2_position" 
                       step="0.01" min="0"
                       value="{{ beam.point_load_2_position or '' }}">
            </div>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary">Save Changes</button>
			<button type="submit" class="btn btn-primary" name="action" value="save">Save</button>
			<button type="submit" class="btn btn-secondary" name="action" value="calculate">Save & Calculate</button>
            <a href="{{ url_for('beams.detail', beam_id=beam.id) }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
